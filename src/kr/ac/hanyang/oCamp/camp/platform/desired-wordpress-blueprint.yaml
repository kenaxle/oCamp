name: desired wordpress blueprint
artifacts:
- type: kr.ac.hanyang.oCamp.entities.artifacts.Script
  content: file://c:/users/kenax/git/kr/ac/hanyang/oCamp/camp/platform/wordpress_install.sh
  requirements:
  - type: kr.ac.hanyang.oCamp.entities.requirements.ExecuteOn
    #target: /wordpress
    fulfillment: id:serverpool
    
  - type: kr.ac.hanyang.oCamp.entities.requirements.ConnectTo
    custom_config: file://c:/users/kenax/git/oCamp/src/kr/ac/hanyang/oCamp/camp/platform/wordpress_configure.sh
    fulfillment: id:mySQL_DBMS        
    
- type: kr.ac.hanyang.oCamp.entities.artifacts.Script
  content: file://c:/users/kenax/git/oCamp/src/kr/ac/hanyang/oCamp/camp/platform/mysql_database_configure.sh
  requirements:
  - type: kr.ac.hanyang.oCamp.entities.requirements.ExecuteOn
    fulfillment: id:mySQL_DBMS          

services:
- id: serverpool
  characteristics:
  - type: kr.ac.hanyang.oCamp.entities.services.cluster.LoadBalancedCluster
    #inboundPorts: XYZ
    member: 
      characteristics: 
      - type: kr.ac.hanyang.oCamp.entities.services.software.VanillaSoftware
             
- id: mySQL_DBMS
  characteristics:
  - type: kr.ac.hanyang.oCamp.entities.services.database.mysql.MySQL  
    install_command: file://c:/users/kenax/git/oCamp/src/kr/ac/hanyang/oCamp/camp/platform/mysql_dbms_install.sh                
        
policies: 
- type: kr.ac.hanyang.oCamp.entities.policies.Placement
  constraints:
  - property: SERVICE_UP
    type: kr.ac.hanyang.oCamp.entities.constraints.EqualTo
    value: true
  - property: PROVISIONING_LOCATION
    type: kr.ac.hanyang.oCamp.entities.constraints.Within
    value: [AWS Virginia (us-east-1), AWS Tokyo (ap-northeast-1)]
  targets: [serverpool]
  
- type: kr.ac.hanyang.oCamp.entities.policies.Placement
  constraints:
  - property: SERVICE_UP 
    type: kr.ac.hanyang.oCamp.entities.constraints.EqualTo
    value: true
  - property: PROVISIONING_LOCATION
    type: kr.ac.hanyang.oCamp.entities.constraints.Within  
    value: [Rackspace Hong Kong (hkg), Rackspace Sydney (syd)]
  targets: [mySQL_DBMS]
     
- type: kr.ac.hanyang.oCamp.entities.policies.QoS
  constraints:
  - property: REQUEST_PER_SECOND
    type: kr.ac.hanyang.oCamp.entities.constraints.Within_Range
    value: [2,5]
  targets: [serverpool]